{%- assign languages = site.data.languages -%}

{%- if page.layout == "post" -%}
  {%- assign eq_pages = site.posts | where: "name", page.name -%}
{%- else -%}
  {%- assign eq_pages = site.pages | where: "name", page.name -%}
{%- endif -%}

<div class="language-switch">
  <div class="language-switch__button" data-toggle="collapse" data-target="#language-switch-float" aria-expanded="false" aria-controls="language-switch-list">
    <i class="fa fa-globe"></i>
    <span class="language-switch__label">{{ languages[page.lang].short }}</span>
    <i class="fa fa-angle-down"></i>
  </div>
  <div class="language-switch__float collapse" id="language-switch-float">
    <ul class="language-switch__list">
      {%- for item in languages -%}
      {%- assign language = item[1] -%}
      {%- assign eq_page = eq_pages | where: "lang", language.id | first -%}
      <li class="language-switch__list-item">
        <a class="language-switch__list-link {% if language.id == page.lang %}is-active{% endif %}" href="{{ eq_page.url }}">
          {{ language.label }}
        </a>
      </li>
      {%- endfor -%}
    </ul>
  </div>
</div>